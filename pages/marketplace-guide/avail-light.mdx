import { Callout } from "nextra-theme-docs";
import Navigation from "components/navigation";
import VideoPlayer from "components/video-player";

# How to deploy an Avail Light Client?

<VideoPlayer embedId="wLhs35wuo34" />

<Callout type="info">
  **NOTE:** Spheron Compute offers the flexibility to create custom
  configurations for your instance.
</Callout>

Spheron allows you to deploy a compute instance pre-installed with Avail Light Client, all set up and ready to use.
To deploy a Avail light client:

1. Follow [the steps](https://blog.spheron.network/deploying-an-avail-light-client-node-using-spheron-a-quick-guide#heading-step-1-create-a-free-spheron-network-account) to create a Free Spheron Network Account  
2. Upon logging in, you'll be directed to the Create Organization page, where you can give your organization name and choose Avatar. Ensure the **"Compute"** option is selected from the drop-down menu of the **"Start With"** option. Click 'Continue'. 
3. Next, you'll be taken to a new page. Click the **"Create New Projects"** button. Add 'Project Title' And 'Project Description' and Click 'Create'.
4. Choose **"Compute"** to use CPU-based instances for running containers.
5. Choose your desired Compute Type option under **Compute Type**.
6. Click **"Start from Marketplace App"** and Select **"Avail Light Client"** from the marketplace.
7. Select your preferred region for deployment. Choosing a region closer to you can improve performance and reduce latency. **US-West** has a higher chance of deploying everything successfully. You can start from the US-West option. [Click here](/compute/cluster/compute/#region) to know more.
8. Spheron will automatically select the recommended plan for the specific template. If you intend to move forward with the recommended plan, just Click 'Deploy' to initiate deployment.
9. If you want you can Select the instance plan that suits your needs. You can use the **"Create Custom Plan"** toggle to create custom plans for your CPU based instance.
10. You have to choose storage from the available options or the custom storage option that fits your needs. This storage will be volatile and is erased when the instance is restarted, redeployed, or shut down. Additionally, you get the option to choose Persistent Storage.
11. Next, you will see the configuration section. Add a seed phrase of an existing wallet or create a new account and get it from [here](https://docs.availproject.org/docs/end-user-guide/accounts). 
    You can add more advanced configuration if required. [Click here](/compute/cluster/compute/#advance-configuration-1) to know more.
12. Click "Deploy" to initiate deployment.

<Callout type="info">
**NOTE:** Wait for your node to be fully set up. After it's provisioned, you'll see an option called ‘Overview’ in the dashboard; click on it to see all the details of the deployed node.
</Callout>

## Deploy Your Own

Deploy your own Avail Light Client with Spheron:

[![Deploy with Spheron](https://bafybeihxqi3jlv6cy2ogh6jjljinntisolbspxcrbgykyv6e5xyzujl3aa.ipfs.sphn.link/spheron-deploy.svg)](https://app.spheron.network/#/compute/marketplace?template=Avail%20Light%20Client&templateId=65a68b8c67881e47ff6df9a6)

## Verify Installation

- The Avail Light Client can be accessed only after the Compute Instance is provisioned.
  Thus, you need to wait for the installation to complete before you can start using it.
- As the node starts, the **Instance Logs** will display the output about the operations performed. If you see messages that blocks are being proposed and finalized, you have a running node.

```
2023-06-04T02:56:31.871284Z  INFO avail_light::telemetry: Metrics server on http://0.0.0.0:9520/metrics
2023-06-04T02:56:31.884271Z  INFO avail_light::http: RPC running on http://127.0.0.1:7000
2023-06-04T02:56:31.884386Z  INFO avail_light::network: Local peer id: PeerId("12D3KooWQ77VEayXfSPWcj6ucAGcjZRTL8ANmtjsuULoyToGSBoo"). Public key: Ed25519(PublicKey(compressed): d44de4113b372855a655f1675325379705aa7a273698194e8e6814dab7791a).
2023-06-04T02:56:31.884605Z  INFO Server::run{addr=127.0.0.1:7000}: warp::server: listening on http://127.0.0.1:7000
2023-06-04T02:56:31.892181Z  INFO avail_light::network::event_loop: Local node is listening on "/ip4/127.0.0.1/udp/37000/quic-v1"
2023-06-04T02:56:31.892487Z  INFO avail_light: Bootstraping the DHT with bootstrap nodes...
2023-06-04T02:56:31.892487Z  INFO avail_light::network::event_loop: Local node is listening on "/ip4/192.168.1.146/udp/37000/quic-v1"
2023-06-04T02:56:31.892540Z  INFO avail_light::network::event_loop: Local node is listening on "/ip4/127.0.0.1/tcp/37000"
2023-06-04T02:56:31.892745Z  INFO avail_light::network::event_loop: Local node is listening on "/ip4/192.168.1.146/tcp/37000"
2023-06-04T02:56:42.220179Z  INFO avail_light::rpc: Connection established to the node: wss://goldberg.avail.tools:443/ws <v1.6.0-99b85257d6b/data-avail/9>
2023-06-04T02:56:42.444576Z  INFO avail_light::light_client: Starting light client...
2023-06-04T02:56:43.453935Z  INFO avail_light::subscriptions: Received finalized block header header.number=2074
2023-06-04T02:56:43.455236Z  INFO avail_light::light_client: Processing finalized block block_number=2074 block_delay=0
2023-06-04T02:56:43.456055Z  INFO avail_light::light_client: Random cells generated: 4 block_number=2074 cells_requested=4
```
### Access the node

1. Once the deployment is complete, you can access the Avail Light Client node using the Connection URL provided by Spheron under Port Policy for Port Internal Port 7000 by clicking on the 'Connection URL.'

2. To check the latest block, Add **`/v1/latest_block`** to the connection. **e.g.http:// connection URL of 7000 port /v1/latest_block**

```
v1/latest_block

```

3. To check the status, Add **`/v1/status`** to the connection. **e.g.http:// connection URL of 7000 port/v1/status**

```
/v1/status

```

4. Append/Add **`v1/confidence/`** to the connection URL again and add the latest block. If it reflects confidence, as stated, it means the block is running successfully.

```
v1/confidence/

```

### Check for the Avail Wallet
1. Type ls in the shell.

```
ls

```

2. Type cat **`identity.toml`** to access the seed phrase. 

```
cat identity.toml

```

3. To Setting up the wallet follow this [link](https://blog.spheron.network/deploying-an-avail-light-client-node-using-spheron-a-quick-guide#heading-step-6-setting-up-the-wallet).


For more information, refer to the [Avail docs](https://docs.availproject.org/docs/operate-a-node/run-a-light-client/0010-light-client).

<Navigation name="Deploy Avail Light Client" />
